# PAF::Pasando parámetros y enlazando selectores
PAF permite pasar parámetros a los selectores de manera muy sencilla. Estos parámetros pueden ser creados en el proyecto, o bien dentro de un selector (para ser usados en un selector posterior cuando se encadenan varios). A continuación un ejemplo para crearlos desde ambos sitios, y por último usándolos. 

En este ejemplo, crearemos un selector que tomará la variable que que le indicamos como parámetro desde el proyecto. A continuación crearemos otro selector y pintaremos dicha variable en un histograma.

## Crando parámetros desde el proyecto
Al momento de configurar un proyecto, basta con añadir una linea (antes de llamar a myProject->Run() obviamente) como sigue:
```cpp
myProject->SetInputParam("Variable", "T_METPF_ET");
```

El archivo de configuración del proyecto quedará así:
```cpp
	PAFProject* myProject = new PAFProject(new PAFPROOFLiteEnvironment(4));
	
	myProject->AddDataFile("/home/javier/Documents/Tree_ZJets_Madgraph_0.root");

	myProject->SetInputParam("Variable", "T_METPF_ET");
	
	myProject->AddSelectorPackage("MyVariableGetter");
	myProject->AddSelectorPackage("MyVariablePainter");
	
	myProject->Run();
```

## Obteniendo la variable desde un selector
En el primer selector, que llamaremos "MyVariableGetter", llamaremos a la función SetParam y estableceremos el parámetro "Result" con el valor de la variable, estableciendolo así:
```cpp
SetParam("Result", result);
```

MyVariableGetter.h completo:
```cpp
	#pragma once

	#include "../PAF/computing/PAFChainItemSelector.h"

	class MyVariableGetter : public PAFChainItemSelector {
		public:
			MyVariableGetter() : PAFChainItemSelector() {}
			virtual ~MyVariableGetter() {}

		protected:
			virtual void InsideLoop();
		
		ClassDef(MyVariableGetter, 1);
	};
```

MyVariableGetter.cpp completo:
```cpp
	#include "MyVariableGetter.h"

	ClassImp(MyVariableGetter)

	void MyVariableGetter::InsideLoop() {
		TString variable = GetParam<TString>("Variable");
		float result = GetFloat("T_METPF_ET");
		SetParam("Result", result);
	}
```

## Obteniendo el valor del parámetro
Aunque aparece en el anterior apartado como obtener un parámetro, aprovecho aquí para explicar que da igual si proviene del proyecto o de un selector anterior, un parámetro se obtiene con GetParam y él se encargará de buscarlo. Para obtener el número generado, y sabiendo que será de tipo float, tenemos varias maneras, aunque en el siguiente tutorial se entrará más en detalle, mostrando todas las posiblidades, aquí utilizaremos la más fácil de entender:
```cpp
double number = GetFloat("Result");
```
MyVariablePainter.h completo:
```cpp
	#pragma once

	#include "../PAF/computing/PAFChainItemSelector.h"

	#include <TH1F.h>

	class MyVariablePainter : public PAFChainItemSelector {
		public:
			MyVariablePainter() : PAFChainItemSelector(), myHistogram(0) {}
			virtual ~MyVariablePainter() {}

		protected:
			virtual void Initialise();
			virtual void InsideLoop();
			virtual void Summary();

		protected:
			TH1F* myHistogram;
		
		ClassDef(MyVariablePainter, 1);
	};
```

MyVariablePainter.cpp completo:
```cpp
	#include "MyVariablePainter.h"

	#include "TCanvas.h"

	ClassImp(MyVariablePainter)

	void MyVariablePainter::Initialise() {
		myHistogram = CreateH1F("myHistogram","#slash{E}_{T}", 100, 0., 200.);
	}

	void MyVariablePainter::InsideLoop() {
		float result = GetParamFloat("Result");
		myHistogram->Fill(result);
	}

	void MyVariablePainter::Summary() {
		TCanvas* c1 = new TCanvas("c1", "myHistogram canvas",200,10,400,400);
		myHistogram = dynamic_cast<TH1F*>(fOutput->FindObject("myHistogram"));
		if (myHistogram) myHistogram->Draw();
		c1->Update();
	}
```


Y ahora ya podemos ejecutarlo y comrpobar como funciona correctamente. Se podrá pasar cualquier tipo de objeto, pero para evitar problemas, se recomienda que hereden siempre de TObject.