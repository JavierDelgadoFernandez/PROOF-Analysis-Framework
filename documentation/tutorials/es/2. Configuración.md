# PAF::Configuración mínima
Requiere de [ROOT](http://root.cern.ch) instalado en la máquina sobre la que se ejecuta ya que PAF se apoya totalmente sobre éste otro framework. En concreto, se ha probado la compilación sobre ROOT 5.34 para aprovechar ciertas características que desde esta versión se ofrecen.

Hay dos maneras de conseguir el framework, una es mediante la librería ya compìlada, la cual sólo es compatible con Linux o compilarla nosotros mismos para cualquier otro caso:

#### Configuración del entorno

Antes de nada, para poder usar PAF o compilarlo, es requisito indispensable tener instalado y configurado [ROOT](http://root.cern.ch) en la máquina. Para ello debe haberse ejecutado el script thisroot.sh de ROOT:
```sh
source path_to_ROOT/bin/thisroot.sh
```

### Librería compilada
La librería que se ofrece, está compilada para Linux amd64, no require más que de ROOT para su funcionamiento. Se ha probado sobre Scientific Linux y sobre Ubuntu. [TODO: Instrucciones para descargarla]

### Descargar el código fuente
Si se buscar realizar la compilación en la propia máquina a partir del código de GitHub, basta con clonar el repositorio:
```sh
git clone https://github.com/PROOF-Analysis-Framework/PROOF-Analysis-Framework
```
Una vez clonado en el directorio ```PROOF-Analysis-Framework``` está todo el código de PAF. 
#### Compilación de PAF 
Para realizar la compilación de PAF, debemos acudir a la carpeta ```build/``` del directorio clonado de GitHub. Una vez allí, existe un Makefile con una serie de reglas. Si sólo deseamos generar la librería, basta con un:
```sh
$ make
```

Pero para utilizar PAF, hacen falta más operaciones, como poner las cabeceras en un sitio accesible, generar de archivos de configuración de ROOT etc. Para ello, existen dos maneras de configurarlo.

##### Portable
Si no disponemos de todos los permisos necesarios o simplemente queremos probar PAF, utilizaremos un PAF portable, simplemente lo crearemos con un:

```sh
$ make portable
```
Para utilizarlo, solamente nos quedaría realizar el source de PAF_setup_portable.sh:
```sh
$ source PAF_setup_portable.sh
```
Este source, configurará las variables de entorno que abajo describimos y le dirá a ROOT que tiene librerías que cargar que se encuentran en el directorio de PAF.

##### Instalación
Pero si disponemos de permisos de escritura en la instalación de PAF o queremos que esté accesible a todos los usuarios sin tener que ellos realizar nada, tenemos un:
```sh
$ make install
```
Que moverá las cabeceras y la librería al directorio de instalación de ROOT y generará la configuración para que ROOT lo cargue automáticamente.
Y para utilizarlo, haremos un source de PAF_setup.sh:
```sh
$ source PAF_setup.sh
```
Este script exportará las variables de entorno que abajo se describen, necesarias para que PAF quede configurado correctamente.

## Variables
PAF necesita ciertos parámetros de configuración. Éstos son pasados mediante variables de entorno y, en general, son definidos en ```PAF_setup.sh```. Son los siguientes:

>- #### "PAFPATH"
Ruta donde se encuentra PAF, es decir, todos los scripts y archivos necesarios para la ejecución. Esta carpeta contiene directorios como /etc, /bin. Por defecto se extrae automáticamente de la dirección en que está ```PAF_setup.sh```

>- #### "PAFREPOSITORIES"
Lista de repositorios donde buscar tanto paquetes como selectores. La lista usará como separadores los dos puntos ":". Se debe indicar la raíz del directorio y nunca un paquete en concreto, sino, el sistema no podrá localizar ni siquiera ese paquete. Por ejemplo, la variable podría contener "```/home/javier/selectores:/home/paf/repositorio:/nfs```" para indicar los 3 repositorios. El orden de prioridad en este ejemplo llevará a PAF a elegir, ante la existencia de varios paquetes o selectores con el mismo nombre, el que se encuentre en "```/home/javier/selectores```", antes que "```home/paf/repositorio```" y antes que en "```/nfs```".
